## 垃圾回收机制

V8将内存(堆)分成：
- 新生代
- 老生代

### 新生代

- 存活时间短
- 使用 Scavenge GC 算法
- 内存空间分为 `From空间` 和 `To空间`
- 这两个空间中，必定一个是使用的，一个是空闲的
- 新分配的对象会被放入From空间中，当From空间被占满时，新生代GC启动
- 算法会检查From空间中存活的对象并复制到To空间中，如果有失活的对象就会销毁
- 当复制完成后将From和To空间互换，GC就结束了

### 老生代

- 存活时间长且数量较多
- 使用`标记清除算法` 和 `标记压缩算法`
- 对象会出现在老生代空间中的条件
	- 新生代中的对象是否已经经历过一个`Scavenge GC`算法，如果经历过的话，会将对象从新生代空间移到老生代空间中
	- To空间的对象占比大小超过25%，在这种情况下，为了不影响到内存分配，会将对象从新生代空间移到老生代空间中
- 先启动`标记清除算法`的条件：
	- 某一个空间没有分块的时候
	- 空间中被对象超过一定限制
	- 空间不能保证新生代中的对象移动到老生代中
- 标记清除算法
	- 会遍历堆中所有的对象，然后标记活得对象，在标记完成后，销毁所有没有被标记的对象。


